(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[327],{8291:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects",function(){return s(6321)}])},8998:function(e,t,s){"use strict";s.d(t,{Z:function(){return x}});var r=s(5893),l=s(7294),a=s(4436),n=s(1664),c=s.n(n),i=s(9583);function o(){let{isAuthenticated:e,logout:t}=(0,a.aC)(),[s,n]=(0,l.useState)(!1),[o,d]=(0,l.useState)(!1),x=()=>{n(!1),d(!1)};return(0,r.jsxs)("header",{className:"bg-gradient-to-r from-blue-600 to-green-600 text-white shadow-lg",children:[(0,r.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)(c(),{href:"/",className:"text-xl font-bold hover:text-blue-200 transition-colors",children:"エネルギー計算サービス"}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[e&&(0,r.jsx)("li",{className:"list-none",children:(0,r.jsx)(c(),{href:"/projects",className:"hover:text-blue-200 transition-colors",children:"プロジェクト"})}),(0,r.jsxs)("li",{className:"relative list-none",children:[(0,r.jsxs)("button",{onClick:()=>{n(!s)},className:"flex items-center hover:text-blue-200 transition-colors",children:[(0,r.jsx)(i.T_s,{className:"mr-2"}),"計算ツール",(0,r.jsx)(i.RiI,{className:"ml-1 text-sm"})]}),s&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg py-2 z-50",children:[(0,r.jsx)(c(),{href:"/tools/bei-calculator",className:"block px-4 py-2 text-gray-800 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:x,children:"BEI計算"}),(0,r.jsx)(c(),{href:"/tools/energy-calculator",className:"block px-4 py-2 text-gray-800 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:x,children:"エネルギー計算"}),(0,r.jsx)(c(),{href:"/tools/tariff-calculator",className:"block px-4 py-2 text-gray-800 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:x,children:"電力料金見積もり"})]})]}),e?(0,r.jsx)("li",{className:"list-none",children:(0,r.jsxs)("button",{onClick:t,className:"flex items-center hover:text-blue-200 transition-colors",children:[(0,r.jsx)(i.fHX,{className:"mr-2"}),"ログアウト"]})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"list-none",children:(0,r.jsx)(c(),{href:"/login",className:"hover:text-blue-200 transition-colors",children:"ログイン"})}),(0,r.jsx)("li",{className:"list-none",children:(0,r.jsx)(c(),{href:"/register",className:"bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors font-medium",children:"新規登録"})})]})]}),(0,r.jsx)("button",{onClick:()=>d(!o),className:"md:hidden text-2xl",children:o?(0,r.jsx)(i.aHS,{}):(0,r.jsx)(i.Fm7,{})})]}),o&&(0,r.jsx)("nav",{className:"md:hidden mt-4 pb-4 border-t border-blue-500 pt-4",children:(0,r.jsxs)("div",{className:"flex flex-col space-y-3",children:[e&&(0,r.jsx)(c(),{href:"/projects",className:"hover:text-blue-200 transition-colors",onClick:x,children:"プロジェクト"}),(0,r.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,r.jsx)("div",{className:"text-blue-200 font-medium mb-2",children:"計算ツール"}),(0,r.jsxs)("div",{className:"flex flex-col space-y-2 ml-2",children:[(0,r.jsx)(c(),{href:"/tools/bei-calculator",className:"text-sm hover:text-blue-200 transition-colors",onClick:x,children:"BEI計算"}),(0,r.jsx)(c(),{href:"/tools/energy-calculator",className:"text-sm hover:text-blue-200 transition-colors",onClick:x,children:"エネルギー計算"}),(0,r.jsx)(c(),{href:"/tools/tariff-calculator",className:"text-sm hover:text-blue-200 transition-colors",onClick:x,children:"電力料金見積もり"})]})]}),e?(0,r.jsxs)("button",{onClick:()=>{t(),x()},className:"flex items-center hover:text-blue-200 transition-colors text-left",children:[(0,r.jsx)(i.fHX,{className:"mr-2"}),"ログアウト"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c(),{href:"/login",className:"hover:text-blue-200 transition-colors",onClick:x,children:"ログイン"}),(0,r.jsx)(c(),{href:"/register",className:"bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors font-medium inline-block text-center",onClick:x,children:"新規登録"})]})]})})]}),(s||o)&&(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:x})]})}function d(){return(0,r.jsx)("footer",{className:"bg-secondary-dark py-6 text-center",children:(0,r.jsx)("div",{className:"container mx-auto px-4",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," 省エネ計算サービス. All rights reserved."]})})})}function x(e){let{children:t}=e;return(0,r.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,r.jsx)(o,{}),(0,r.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:t}),(0,r.jsx)(d,{})]})}},6321:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(5893),l=s(7294),a=s(1163),n=s(8998),c=s(3718),i=s(1664),o=s.n(i),d=s(9583);function x(){let[e,t]=(0,l.useState)([]),[s,i]=(0,l.useState)(!0),[x,h]=(0,l.useState)("");(0,a.useRouter)(),(0,l.useEffect)(()=>{m()},[]);let m=async()=>{try{i(!0);let e=await c.hY.getAll();t(e.data)}catch(e){console.error("プロジェクト取得エラー:",e),h("プロジェクトの取得中にエラーが発生しました。")}finally{i(!1)}},u=async(s,r)=>{if(window.confirm("プロジェクト「".concat(r,"」を削除しますか？")))try{await c.hY.delete(s),t(e.filter(e=>e.id!==s))}catch(e){console.error("削除エラー:",e),alert("削除中にエラーが発生しました。")}};return(0,r.jsxs)(n.Z,{children:[(0,r.jsxs)("div",{className:"mb-6 flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"プロジェクト一覧"}),(0,r.jsxs)(o(),{href:"/projects/new",className:"bg-primary hover:bg-primary-dark text-white py-2 px-4 rounded-md flex items-center",children:[(0,r.jsx)(d.wEH,{className:"mr-2"})," 新規プロジェクト"]})]}),s?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,r.jsx)("p",{children:"プロジェクトを読み込み中..."})]}):x?(0,r.jsx)("div",{className:"bg-red-50 text-red-600 p-4 rounded-md",children:x}):0===e.length?(0,r.jsxs)("div",{className:"bg-gray-50 p-8 rounded-md text-center",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"プロジェクトがまだありません。新規プロジェクトを作成してください。"}),(0,r.jsxs)(o(),{href:"/projects/new",className:"bg-primary hover:bg-primary-dark text-white py-2 px-4 rounded-md inline-flex items-center",children:[(0,r.jsx)(d.wEH,{className:"mr-2"})," 新規プロジェクト"]})]}):(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"min-w-full bg-white shadow-md rounded-lg overflow-hidden",children:[(0,r.jsx)("thead",{className:"bg-gray-100",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"py-3 px-4 text-left",children:"プロジェクト名"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left",children:"作成日"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left",children:"更新日"}),(0,r.jsx)("th",{className:"py-3 px-4 text-left",children:"状態"}),(0,r.jsx)("th",{className:"py-3 px-4 text-center",children:"操作"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-gray-200",children:e.map(e=>(0,r.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsx)(o(),{href:"/projects/".concat(e.id),className:"text-primary hover:underline",children:e.name})}),(0,r.jsx)("td",{className:"py-3 px-4",children:new Date(e.created_at).toLocaleDateString("ja-JP")}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.updated_at?new Date(e.updated_at).toLocaleDateString("ja-JP"):"-"}),(0,r.jsx)("td",{className:"py-3 px-4",children:e.result_data?(0,r.jsx)("span",{className:"text-green-600 font-medium",children:"計算済み"}):(0,r.jsx)("span",{className:"text-amber-600",children:"未計算"})}),(0,r.jsx)("td",{className:"py-3 px-4",children:(0,r.jsxs)("div",{className:"flex justify-center space-x-2",children:[(0,r.jsx)(o(),{href:"/projects/".concat(e.id,"/calculate"),className:"text-primary hover:text-primary-dark",title:"計算実行",children:(0,r.jsx)(d.T_s,{})}),(0,r.jsx)(o(),{href:"/projects/".concat(e.id,"/edit"),className:"text-blue-600 hover:text-blue-800",title:"編集",children:(0,r.jsx)(d.KHI,{})}),(0,r.jsx)("button",{onClick:()=>u(e.id,e.name),className:"text-red-600 hover:text-red-800",title:"削除",children:(0,r.jsx)(d.Xm5,{})})]})})]},e.id))})]})})]})}},8357:function(e,t,s){"use strict";s.d(t,{w_:function(){return i}});var r=s(7294),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=r.createContext&&r.createContext(l),n=function(){return(n=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},c=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&0>t.indexOf(r)&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,r=Object.getOwnPropertySymbols(e);l<r.length;l++)0>t.indexOf(r[l])&&Object.prototype.propertyIsEnumerable.call(e,r[l])&&(s[r[l]]=e[r[l]]);return s};function i(e){return function(t){return r.createElement(o,n({attr:n({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return r.createElement(t.tag,n({key:s},t.attr),e(t.child))})}(e.child))}}function o(e){var t=function(t){var s,l=e.attr,a=e.size,i=e.title,o=c(e,["attr","size","title"]),d=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,o,{className:s,style:n(n({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),i&&r.createElement("title",null,i),e.children)};return void 0!==a?r.createElement(a.Consumer,null,function(e){return t(e)}):t(l)}}},function(e){e.O(0,[445,664,774,888,179],function(){return e(e.s=8291)}),_N_E=e.O()}]);