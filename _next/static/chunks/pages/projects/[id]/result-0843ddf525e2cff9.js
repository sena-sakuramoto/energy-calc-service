(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{8214:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/[id]/result",function(){return r(9975)}])},8998:function(e,s,r){"use strict";r.d(s,{Z:function(){return x}});var t=r(5893),l=r(7294),a=r(4436),n=r(1664),c=r.n(n),i=r(9583);function d(){let{isAuthenticated:e,logout:s}=(0,a.aC)(),[r,n]=(0,l.useState)(!1),[d,o]=(0,l.useState)(!1),x=()=>{n(!1),o(!1)};return(0,t.jsxs)("header",{className:"bg-gradient-to-r from-blue-600 to-green-600 text-white shadow-lg",children:[(0,t.jsxs)("div",{className:"container mx-auto px-4 py-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)(c(),{href:"/",className:"text-xl font-bold hover:text-blue-200 transition-colors",children:"エネルギー計算サービス"}),(0,t.jsxs)("nav",{className:"hidden md:flex items-center space-x-6",children:[e&&(0,t.jsx)("li",{className:"list-none",children:(0,t.jsx)(c(),{href:"/projects",className:"hover:text-blue-200 transition-colors",children:"プロジェクト"})}),(0,t.jsxs)("li",{className:"relative list-none",children:[(0,t.jsxs)("button",{onClick:()=>{n(!r)},className:"flex items-center hover:text-blue-200 transition-colors",children:[(0,t.jsx)(i.T_s,{className:"mr-2"}),"計算ツール",(0,t.jsx)(i.RiI,{className:"ml-1 text-sm"})]}),r&&(0,t.jsxs)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg py-2 z-50",children:[(0,t.jsx)(c(),{href:"/tools/bei-calculator",className:"block px-4 py-2 text-gray-800 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:x,children:"BEI計算"}),(0,t.jsx)(c(),{href:"/tools/energy-calculator",className:"block px-4 py-2 text-gray-800 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:x,children:"エネルギー計算"}),(0,t.jsx)(c(),{href:"/tools/tariff-calculator",className:"block px-4 py-2 text-gray-800 hover:bg-blue-50 hover:text-blue-600 transition-colors",onClick:x,children:"電力料金見積もり"})]})]}),e?(0,t.jsx)("li",{className:"list-none",children:(0,t.jsxs)("button",{onClick:s,className:"flex items-center hover:text-blue-200 transition-colors",children:[(0,t.jsx)(i.fHX,{className:"mr-2"}),"ログアウト"]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"list-none",children:(0,t.jsx)(c(),{href:"/login",className:"hover:text-blue-200 transition-colors",children:"ログイン"})}),(0,t.jsx)("li",{className:"list-none",children:(0,t.jsx)(c(),{href:"/register",className:"bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors font-medium",children:"新規登録"})})]})]}),(0,t.jsx)("button",{onClick:()=>o(!d),className:"md:hidden text-2xl",children:d?(0,t.jsx)(i.aHS,{}):(0,t.jsx)(i.Fm7,{})})]}),d&&(0,t.jsx)("nav",{className:"md:hidden mt-4 pb-4 border-t border-blue-500 pt-4",children:(0,t.jsxs)("div",{className:"flex flex-col space-y-3",children:[e&&(0,t.jsx)(c(),{href:"/projects",className:"hover:text-blue-200 transition-colors",onClick:x,children:"プロジェクト"}),(0,t.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4",children:[(0,t.jsx)("div",{className:"text-blue-200 font-medium mb-2",children:"計算ツール"}),(0,t.jsxs)("div",{className:"flex flex-col space-y-2 ml-2",children:[(0,t.jsx)(c(),{href:"/tools/bei-calculator",className:"text-sm hover:text-blue-200 transition-colors",onClick:x,children:"BEI計算"}),(0,t.jsx)(c(),{href:"/tools/energy-calculator",className:"text-sm hover:text-blue-200 transition-colors",onClick:x,children:"エネルギー計算"}),(0,t.jsx)(c(),{href:"/tools/tariff-calculator",className:"text-sm hover:text-blue-200 transition-colors",onClick:x,children:"電力料金見積もり"})]})]}),e?(0,t.jsxs)("button",{onClick:()=>{s(),x()},className:"flex items-center hover:text-blue-200 transition-colors text-left",children:[(0,t.jsx)(i.fHX,{className:"mr-2"}),"ログアウト"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c(),{href:"/login",className:"hover:text-blue-200 transition-colors",onClick:x,children:"ログイン"}),(0,t.jsx)(c(),{href:"/register",className:"bg-white text-blue-600 px-4 py-2 rounded-lg hover:bg-blue-50 transition-colors font-medium inline-block text-center",onClick:x,children:"新規登録"})]})]})})]}),(r||d)&&(0,t.jsx)("div",{className:"fixed inset-0 z-40",onClick:x})]})}function o(){return(0,t.jsx)("footer",{className:"bg-secondary-dark py-6 text-center",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["\xa9 ",new Date().getFullYear()," 省エネ計算サービス. All rights reserved."]})})})}function x(e){let{children:s}=e;return(0,t.jsxs)("div",{className:"flex flex-col min-h-screen",children:[(0,t.jsx)(d,{}),(0,t.jsx)("main",{className:"flex-grow container mx-auto px-4 py-8",children:s}),(0,t.jsx)(o,{})]})}},9975:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var t=r(5893),l=r(7294),a=r(1163),n=r(8998),c=r(3718),i=r(1664),d=r.n(i),o=r(9583),x=r(6775),m=r(5376);function h(){let[e,s]=(0,l.useState)(null),[r,i]=(0,l.useState)(!0),[x,h]=(0,l.useState)(""),[b,p]=(0,l.useState)(!1),[u,j]=(0,l.useState)(!1),g=(0,a.useRouter)(),{id:N}=g.query;(0,l.useEffect)(()=>{N&&y(N)},[N]);let y=async e=>{try{let r=await c.hY.getById(e);s(r.data),r.data.result_data||g.push("/projects/".concat(e,"/calculate"))}catch(e){console.error("プロジェクト取得エラー:",e),h("プロジェクトの取得中にエラーが発生しました。")}finally{i(!1)}},f=async()=>{try{p(!0);let s=await c.Vo.getPDF(N),r=new Blob([s.data],{type:"application/pdf"}),t=window.URL.createObjectURL(r),l=document.createElement("a");l.href=t,l.download="".concat(e.name,"_report.pdf"),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(t)}catch(e){console.error("PDFダウンロードエラー:",e),alert("PDFのダウンロード中にエラーが発生しました。")}finally{p(!1)}},v=async()=>{try{j(!0);let s=await c.Vo.getExcel(N),r=new Blob([s.data],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),t=window.URL.createObjectURL(r),l=document.createElement("a");l.href=t,l.download="".concat(e.name,"_report.xlsx"),document.body.appendChild(l),l.click(),l.remove(),window.URL.revokeObjectURL(t)}catch(e){console.error("Excelダウンロードエラー:",e),alert("Excelのダウンロード中にエラーが発生しました。")}finally{j(!1)}};if(r)return(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto mb-4"}),(0,t.jsx)("p",{children:"結果を読み込み中..."})]})});if(!e||!e.result_data)return(0,t.jsx)(n.Z,{children:(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("p",{children:"計算データがありません。計算を実行してください。"}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(d(),{href:"/projects/".concat(N,"/calculate"),className:"bg-primary hover:bg-primary-dark text-white py-2 px-4 rounded-md",children:"計算ページへ"})})]})});let _=e.result_data;e.input_data;let w={labels:[],datasets:[{data:[],backgroundColor:["rgba(255, 99, 132, 0.6)","rgba(54, 162, 235, 0.6)","rgba(255, 206, 86, 0.6)","rgba(75, 192, 192, 0.6)","rgba(153, 102, 255, 0.6)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)"],borderWidth:1}]},k={heating:"暖房",cooling:"冷房",ventilation:"換気",hot_water:"給湯",lighting:"照明"};for(let[e,s]of Object.entries(_.primary_energy_result.energy_by_use))w.labels.push(k[e]||e),w.datasets[0].data.push(s);let C={labels:["設計値","基準値"],datasets:[{label:"一次エネルギー消費量 (MJ/年)",data:[_.primary_energy_result.total_energy_consumption,_.primary_energy_result.standard_energy_consumption],backgroundColor:["rgba(75, 192, 192, 0.6)","rgba(255, 99, 132, 0.6)"],borderColor:["rgba(75, 192, 192, 1)","rgba(255, 99, 132, 1)"],borderWidth:1}]};return(0,t.jsxs)(n.Z,{children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-wrap justify-between items-center",children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["計算結果 - ",e.name]}),(0,t.jsxs)("div",{className:"flex space-x-2 mt-2 sm:mt-0",children:[(0,t.jsxs)(d(),{href:"/projects",className:"bg-gray-200 hover:bg-gray-300 py-2 px-3 rounded-md flex items-center",children:[(0,t.jsx)(o.xng,{className:"mr-1"})," 一覧へ"]}),(0,t.jsxs)("button",{onClick:f,disabled:b,className:"bg-red-600 hover:bg-red-700 text-white py-2 px-3 rounded-md flex items-center",children:[(0,t.jsx)(o.ZJh,{className:"mr-1"})," ",b?"ダウンロード中...":"PDF出力"]}),(0,t.jsxs)("button",{onClick:v,disabled:u,className:"bg-green-600 hover:bg-green-700 text-white py-2 px-3 rounded-md flex items-center",children:[(0,t.jsx)(o.GzT,{className:"mr-1"})," ",u?"ダウンロード中...":"Excel出力"]})]})]}),x&&(0,t.jsx)("div",{className:"mb-6 bg-red-50 text-red-600 p-4 rounded-md",children:x}),(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"総合判定結果"}),(0,t.jsxs)("div",{className:"text-center p-4 rounded-md ".concat(_.overall_compliance?"bg-green-50 text-green-800":"bg-red-50 text-red-800"),children:[(0,t.jsx)("div",{className:"text-3xl font-bold mb-2",children:_.overall_compliance?"適合":"不適合"}),(0,t.jsx)("div",{children:_.message})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"エネルギー消費内訳"}),(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(m.by,{data:w,options:{maintainAspectRatio:!1}})})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md lg:col-span-2",children:[(0,t.jsx)("h2",{className:"text-xl font-bold mb-4",children:"詳細データ"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"外皮性能"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"項目"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"設計値"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"基準値"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"判定"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-3 border",children:"UA値 (W/m\xb2K)"}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:_.envelope_result.ua_value.toFixed(2)}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:_.envelope_result.ua_value<.6?"0.60":"-"})," ",(0,t.jsx)("td",{className:"py-2 px-3 border ".concat(_.envelope_result.is_ua_compliant?"text-green-600":"text-red-600"),children:_.envelope_result.is_ua_compliant?"適合":"不適合"})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-3 border",children:"ηA値"}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:_.envelope_result.eta_a_value.toFixed(2)}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:_.envelope_result.eta_a_value<2.8?"2.80":"-"})," ",(0,t.jsx)("td",{className:"py-2 px-3 border ".concat(_.envelope_result.is_eta_a_compliant?"text-green-600":"text-red-600"),children:_.envelope_result.is_eta_a_compliant?"適合":"不適合"})]})]})]})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"一次エネルギー性能"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"項目"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"設計値"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"基準値"})]})}),(0,t.jsxs)("tbody",{children:[(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-3 border",children:"一次エネルギー消費量 (MJ/年)"}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:_.primary_energy_result.total_energy_consumption.toFixed(1)}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:_.primary_energy_result.standard_energy_consumption.toFixed(1)})]}),(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-3 border",children:"省エネ率 (%)"}),(0,t.jsxs)("td",{className:"py-2 px-3 border",colSpan:"2",children:[_.primary_energy_result.energy_saving_rate.toFixed(2),(0,t.jsxs)("span",{className:"ml-2 text-sm",children:["(",_.primary_energy_result.is_energy_compliant?"適合":"不適合",")"]})]})]})]})]})})]})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"エネルギー消費量比較"}),(0,t.jsx)("div",{className:"h-64",children:(0,t.jsx)(m.$Q,{data:C,options:{maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}})})]}),(0,t.jsxs)("div",{className:"mt-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"用途別消費量詳細"}),(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full border",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"用途"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"設計値 (GJ/年)"}),(0,t.jsx)("th",{className:"py-2 px-3 border text-left",children:"割合 (%)"})]})}),(0,t.jsx)("tbody",{children:Object.entries(_.primary_energy_result.energy_by_use).map(e=>{let[s,r]=e,l=(r/_.primary_energy_result.total_energy_consumption*100).toFixed(1);return(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"py-2 px-3 border",children:k[s]||s}),(0,t.jsx)("td",{className:"py-2 px-3 border",children:r.toFixed(1)}),(0,t.jsxs)("td",{className:"py-2 px-3 border",children:[l,"%"]})]},s)})})]})})]})]})]})]})}x.kL.register(x.qi,x.u,x.De,x.uw,x.f$,x.ZL)}},function(e){e.O(0,[445,757,664,13,774,888,179],function(){return e(e.s=8214)}),_N_E=e.O()}]);